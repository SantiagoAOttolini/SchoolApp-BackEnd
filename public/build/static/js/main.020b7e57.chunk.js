(this["webpackJsonpschoolapp-frontend"]=this["webpackJsonpschoolapp-frontend"]||[]).push([[0],{100:function(e,t,a){},126:function(e,t,a){},127:function(e,t,a){},128:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(61),i=a.n(c),o=a(16),s=a(17),l=a(25),u=a(18),d=a(23),m=a(21),p=a(82),E=a(19),h=a(83),b=a(41),f=a(2),g={authentication:!1,users:[],error:null,isLoading:!1,message:void 0,logged:!1,token:"",failedLogin:!1},S={students:[],size:"",error:null,isLoading:!1,message:void 0,studentSelected:""},y={qualifications:[],size:"",error:null,isLoading:!1,message:void 0,qualificationSelected:""},O=Object(E.combineReducers)({users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTHENTICATION":return Object(f.a)({},e,{authentication:t.payload.authentication,token:t.payload.token});case"USER_LOGOUT":return{state:g};case"LOGIN_USER_PENDING":return Object(f.a)({},e,{isLoading:!0,failedLogin:!1});case"LOGIN_USER_SUCCESS":return Object(f.a)({},e,{isLoading:!1,token:t.payload.token,authentication:!0});case"LOGIN_USER_ERROR":return Object(f.a)({},e,{isLoading:!1,message:t.payload,failedLogin:!0});case"FETCH_USERS":return Object(f.a)({},e,{users:t.payload});case"ADD_USER_PENDING":return Object(f.a)({},e,{isLoading:!0});case"ADD_USER_SUCCESS":var a=t.payload.user,n=[].concat(Object(b.a)(e.users),[a]);return Object(f.a)({},e,{isLoading:!1,users:n});case"ADD_USER_ERROR":return Object(f.a)({},e,{isLoading:!1,error:t.error,message:t.payload.message});default:return e}},students:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_STUDENT":return Object(f.a)({},e,{students:t.payload.students});case"ADD_STUDENT_PENDING":return Object(f.a)({},e,{isLoading:!0});case"ADD_STUDENT_SUCCESS":var a=t.payload.student,n=[].concat(Object(b.a)(e.students),[a]);return Object(f.a)({},e,{isLoading:!1,students:n});case"ADD_STUDENT_ERROR":return Object(f.a)({},e,{isLoading:!1,error:t.error,message:t.payload.message});case"DELETE_STUDENT_PENDING":return Object(f.a)({},e,{isLoading:!0});case"DELETE_STUDENT_SUCCESS":console.log(t.payload);var r=Object(b.a)(e.students),c=r.findIndex((function(e){return e._id===t.payload._id}));return r.splice(c,1),Object(f.a)({},e,{isLoading:!1,students:r});case"DELETE_STUDENT_ERROR":return Object(f.a)({},e,{isLoading:!1,message:t.payload.message});default:return e}},qualifications:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_QUALIFICATION":return Object(f.a)({},e,{qualifications:t.payload.qualifications});case"ADD_QUALIFICATION_PENDING":return Object(f.a)({},e,{isLoading:!0});case"ADD_QUALIFICATION_SUCCESS":console.log(t.payload);var a=t.payload.qualification,n=[].concat(Object(b.a)(e.qualifications),[a]);return Object(f.a)({},e,{isLoading:!1,qualifications:n});case"ADD_QUALIFICATION_ERROR":return Object(f.a)({},e,{isLoading:!1,error:t.error,message:t.payload.message});case"SET_SELECTED_QUALIFICATION_ID":return Object(f.a)({},e,{qualificationSelected:t.payload});case"DELETE_QUALIFICATION_PENDING":return Object(f.a)({},e,{isLoading:!0});case"DELETE_QUALIFICATION_SUCCESS":console.log(t.payload);var r=Object(b.a)(e.qualifications),c=r.findIndex((function(e){return e._id===t.payload._id}));return r.splice(c,1),Object(f.a)({},e,{isLoading:!1,qualifications:r});case"DELETE_QUALIFICATION_ERROR":return Object(f.a)({},e,{isLoading:!1,message:t.payload.message});default:return e}}}),N=[h.a],j=Object(E.createStore)(O,Object(p.composeWithDevTools)(E.applyMiddleware.apply(void 0,N))),L=a(84),T=a(26),D=a(42),_=(a(98),function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"containerHome"},r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"title"},r.a.createElement("h1",{className:"text1"},"School App"),r.a.createElement("h1",{className:"text2"},"Welcome")),r.a.createElement("div",{className:"nav"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(T.b,{className:"login",to:"/Login"},"Login")),r.a.createElement("li",null," ",r.a.createElement(T.b,{className:"register",to:"/register"},"Register"))))),r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"section"},r.a.createElement("h2",{className:"headerInfo"},"Information"),r.a.createElement("p",null,"This is a web application designed by students Ivan Jukonis and Santiago Ottolini from UAI university. The objective of this application is to demonstrate the knowledge acquired on the subject MCGA dictated by professor David Curras.",r.a.createElement("br",null),"The idea of \u200b\u200bthe website is to recreate the functionality of a student grade record used by teachers. Here you will interact with a list of students and a list of their grades.",r.a.createElement("br",null),"Access to the page will be given through a login with the corresponding security measures."))))}}]),t}(n.Component)),A=Object(m.b)((function(e){return{isLoading:e.isLoading,authentication:e.Authentication}}),(function(e){return Object(E.bindActionCreators)({},e)}))(_),v=a(63),I=(a(100),a(6)),k=function(e){return function(e){e({type:"LOGIN_USER_PENDING"});var t={timeout:25e3,method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:document.getElementById("emailLogin").value,password:document.getElementById("passwordLogin").value})};return fetch("https://rocky-reef-67259.herokuapp.com/api/user/login",t).then((function(e){return e.json()})).then((function(t){return"Authentication Failed"!==t.msg?e({type:"LOGIN_USER_SUCCESS",payload:t}):e({type:"LOGIN_USER_ERROR",payload:t.error})}))}},C=a(88),R=a(10),U=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).getLogin=function(e){a.props.logIn(e).then((function(e){a.props.authentication&&a.props.history.push("/menu")}))},a.getLogin=a.getLogin.bind(Object(v.a)(a)),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"loginContainer"},r.a.createElement(I.c,{initialValues:{email:"",password:""},onSubmit:this.getLogin,validationSchema:R.b().shape({email:R.c().min(2).required("Required"),password:R.c().min(2).required("Required")})},(function(t){var a=t.handleSubmit;return r.a.createElement(I.b,{onSubmit:a},r.a.createElement("div",{className:"containerLogin"},r.a.createElement("h5",null," Sign in to SchoolApp"),r.a.createElement("div",{className:"login"},r.a.createElement(I.a,{type:"email",id:"emailLogin",name:"email",placeholder:"Email"}),r.a.createElement(I.a,{type:"password",id:"passwordLogin",name:"password",placeholder:"Password"}),e.props.isLoading?r.a.createElement(C.ClipLoader,{size:25,color:"white",loading:!0}):r.a.createElement("button",{type:"submit",className:"btnLogin"},"Sign In"),r.a.createElement("div",null,e.props.failedLogin?r.a.createElement("div",{className:"loginError"}):null)),r.a.createElement("div",{className:"btnLinks"},r.a.createElement("p",null,r.a.createElement(T.b,{className:"btnCreateAccount",to:"/register"},"Create Account")),r.a.createElement("p",null,r.a.createElement(T.b,{className:"btnHome",to:"/home"},"Back to home")))))})))}}]),t}(n.Component),q=Object(m.b)((function(e,t){return{users:e.users,isLoading:e.users.isLoading,authentication:e.users.authentication,failedLogin:e.users.failedLogin}}),(function(e){return Object(E.bindActionCreators)({logIn:k},e)}))(U),w=(a(126),function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"registerContainer"},r.a.createElement(I.c,{initialValues:{password:"",email:""},onSubmit:function(t){e.props.postUser(t).then((function(t){e.props.history.push("/home")}))},validationSchema:R.b().shape({password:R.c().min(2).required("Required"),email:R.c().min(2).required("Required")})},(function(e){var t=e.handleSubmit;return r.a.createElement(I.b,{onSubmit:t},r.a.createElement("div",{className:"containerRegister"},r.a.createElement("h4",null," Sign up to SchoolApp"),r.a.createElement(I.a,{type:"text",className:"registerEmail",name:"email",placeholder:"Email"}),r.a.createElement(I.a,{type:"text",className:"registerPassword",name:"password",placeholder:"Password"}),r.a.createElement("button",{className:"btnSubmit",type:"submit"},"Sign Up"),r.a.createElement("div",{className:"btnRegisterLinks"},r.a.createElement("p",null,r.a.createElement(T.b,{className:"btnBackHome",to:"/home"},"Back to home")))))})))}}]),t}(n.Component)),P=Object(m.b)((function(e){return{users:e.users,isLoading:e.isLoading}}),{postUser:function(e){return function(t){t({type:"ADD_USER_PENDING"});var a={timeout:25e3,method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return fetch("https://rocky-reef-67259.herokuapp.com/api/user/signup",a).then((function(e){return e.json()})).then((function(e){return Object.entries(e).length?t({type:"ADD_USER_SUCCESS",payload:{user:e}}):Promise.reject(e)})).catch((function(e){return t({type:"ADD_USER_ERROR",payload:e})}))}}})(w),Q=(a(127),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={check:!1,chek2:!1},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchStudents(),this.props.fetchQualifications()}},{key:"render",value:function(){var e=this;return console.log(this.props.qualificationList),r.a.createElement("div",{className:"containerMenu"},r.a.createElement("div",{className:this.state.check?"overlayEnabled":"overlayDisabled"}),r.a.createElement("div",{className:this.state.check?"popUpEnabled":"popUpDisabled"},r.a.createElement(I.c,{initialValues:{name:"",lastname:"",age:"",class:""},onSubmit:function(t){e.props.postStudent(t),e.setState((function(e){return{check:!e.check}}))},validationSchema:R.b().shape({name:R.c().min(2).required("Required"),lastname:R.c().min(2).required("Required"),age:R.a().min(2).required("Required"),class:R.c().min(2).required("Required")})},(function(t){var a=t.handleSubmit;return r.a.createElement(I.b,{onSubmit:a},r.a.createElement("div",{className:"containerAddStudent"},r.a.createElement("h4",null," Add Students"),r.a.createElement(I.a,{type:"text",className:"nameStudent",name:"name",placeholder:"Name"}),r.a.createElement(I.a,{type:"text",className:"lastnameStudent",name:"lastname",placeholder:"Last name"}),r.a.createElement(I.a,{type:"text",className:"ageStudent",name:"age",placeholder:"Age"}),r.a.createElement(I.a,{type:"text",className:"classStudent",name:"class",placeholder:"Class"}),r.a.createElement("button",{className:"btnAddStudent",type:"submit"},"Add"),r.a.createElement("button",{type:"button",className:"btnAddStudent",onClick:function(){return e.setState((function(e){return{check:!e.check}}))}},"Back")))}))),r.a.createElement("div",{className:this.state.check2?"overlayEnabledMark":"overlayDisabledMark"}),r.a.createElement("div",{className:this.state.check2?"popUpEnabledMark":"popUpDisabledMark"},r.a.createElement(I.c,{initialValues:{studentId:"",subject:"",note:""},onSubmit:function(t){e.props.postQualification(t),e.setState((function(e){return{check2:!e.check2}}))},validationSchema:R.b().shape({studentId:R.c().min(2).required("Required"),subject:R.c().min(2).required("Required"),note:R.a().min(2).required("Required")})},(function(t){var a=t.handleSubmit;return r.a.createElement(I.b,{onSubmit:a},r.a.createElement("div",{className:"containerAddMarks"},r.a.createElement("h4",null," Add Notes"),r.a.createElement(I.a,{type:"text",as:"select",className:"nameStudentMark",name:"studentId",placeholder:"Student"},e.props.studentList.map((function(e){return r.a.createElement("option",{value:e._id},"".concat(e.name,"-").concat(e.lastname))}))),r.a.createElement(I.a,{type:"text",className:"subjectMark",name:"subject",placeholder:"Subject"}),r.a.createElement(I.a,{type:"text",className:"noteMark",name:"note",placeholder:"Note"}),r.a.createElement("button",{className:"btnAddMark",type:"submit"},"Add"),r.a.createElement("button",{type:"button",className:"btnAddMark",onClick:function(){return e.setState((function(e){return{check2:!e.check2}}))}},"Back")))}))),r.a.createElement("table",{className:"content-table-student"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Actions"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Last name"),r.a.createElement("th",null,"Age"),r.a.createElement("th",null,"Class"))),r.a.createElement("tbody",null,this.props.studentList&&this.props.studentList.map((function(t){return r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("button",{className:"btnDeleteStudent",onClick:function(){e.props.deleteStudent(t._id)}},"Delete")),r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.lastname),r.a.createElement("td",null,t.age),r.a.createElement("td",null,t.class))}))),r.a.createElement("button",{className:"btnAdd",onClick:function(){return e.setState((function(e){return{check:!e.check}}))}},"Add")),r.a.createElement("table",{className:"content-table-mark"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Actions"),r.a.createElement("th",null,"Student"),r.a.createElement("th",null,"Subject"),r.a.createElement("th",null,"Note"))),r.a.createElement("tbody",null,this.props.qualificationList&&this.props.qualificationList.map((function(t){return r.a.createElement("tr",null,r.a.createElement("button",{className:"btnDeleteQualification",onClick:function(){e.props.deleteQualification(t._id)}},"Delete"),r.a.createElement("td",null,"".concat(t.student.name,"-").concat(t.student.lastname)),r.a.createElement("td",null,t.subject),r.a.createElement("td",null,t.note))}))),r.a.createElement("button",{className:"btnAdd",onClick:function(){return e.setState((function(e){return{check2:!e.check2}}))}},"Add")),r.a.createElement("div",{className:"buttonLogOut"},r.a.createElement(T.b,{className:"btnLogOut",to:"/login",onClick:this.props.logOut},"Log Out")))}}]),t}(n.Component)),F={Authentication:function(e){return{type:"AUTHENTICATION",payload:e}},logOut:function(e){return{type:"USER_LOGOUT"}},postStudent:function(e){return function(t){t({type:"ADD_STUDENT_PENDING"});var a=j.getState().users.token,n={timeout:25e3,method:"POST",headers:{"Content-Type":"application/json",authorization:"BEARER ".concat(a)},body:JSON.stringify(e)};return fetch("https://rocky-reef-67259.herokuapp.com/api/students",n).then((function(e){return e.json()})).then((function(e){return Object.entries(e).length?t({type:"ADD_STUDENT_SUCCESS",payload:{student:e.createdStudent}}):Promise.reject(e)})).catch((function(e){return t({type:"ADD_STUDENT_ERROR",payload:e})}))}},fetchStudents:function(){return function(e){fetch("https://rocky-reef-67259.herokuapp.com/api/students").then((function(e){return e.json()})).then((function(t){return e({type:"FETCH_STUDENT",payload:t})}))}},postQualification:function(e){return function(t){t({type:"ADD_QUALIFICATION_PENDING"});var a=j.getState().users.token,n={timeout:25e3,method:"POST",headers:{"Content-Type":"application/json",authorization:"BEARER ".concat(a)},body:JSON.stringify(e)};return fetch("https://rocky-reef-67259.herokuapp.com/api/qualifications",n).then((function(e){return e.json()})).then((function(e){return Object.entries(e).length?t({type:"ADD_QUALIFICATION_SUCCESS",payload:{qualification:e.createdQualification}}):Promise.reject(e)})).catch((function(e){return t({type:"ADD_QUALIFICATION_ERROR",payload:e})}))}},fetchQualifications:function(){return function(e){fetch("https://rocky-reef-67259.herokuapp.com/api/qualifications").then((function(e){return e.json()})).then((function(t){return e({type:"FETCH_QUALIFICATION",payload:t})}))}},deleteStudent:function(e){return function(t){t({type:"DELETE_STUDENT_PENDING"});return fetch("https://rocky-reef-67259.herokuapp.com/api/students/".concat(e),{timeout:25e3,method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return Object.entries(e).length?"error"===e.message?t({type:"DELETE_STUDENT_ERROR"}):t({type:"DELETE_STUDENT_SUCCESS",payload:e}):Promise.reject(e)})).catch((function(e){return t({type:"DELETE_STUDENT_ERROR",payload:e})}))}},deleteQualification:function(e){return function(t){t({type:"DELETE_QUALIFICATION_PENDING"});return fetch("https://rocky-reef-67259.herokuapp.com/api/qualifications/".concat(e),{timeout:25e3,method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return Object.entries(e).length?t({type:"DELETE_QUALIFICATION_SUCCESS",payload:e}):Promise.reject(e)})).catch((function(e){return t({type:"DELETE_QUALIFICATION_ERROR",payload:e})}))}}},G=Object(m.b)((function(e){return{isLoading:e.isLoading,authentication:e.AUTHENTICATION,studentList:e.students.students,qualificationList:e.qualifications.qualifications}}),F)(Q),x=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(T.a,null,r.a.createElement(D.d,null,r.a.createElement(D.b,{exact:!0,path:"/home",component:A}),r.a.createElement(M,{exact:!0,path:"/menu",component:G}),r.a.createElement(D.b,{exact:!0,path:"/login",component:q}),r.a.createElement(D.b,{exact:!0,path:"/register",component:P}),r.a.createElement(D.a,{from:"/",to:"/home"})))}}]),t}(n.Component),M=function(e){var t=e.component,a=Object(L.a)(e,["component"]);return r.a.createElement(D.b,Object.assign({},a,{render:function(e){return j.getState().users.token?r.a.createElement(t,e):r.a.createElement(D.a,{to:"/"})}}))},H=Object(m.b)()(x),B=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(m.a,{store:j},r.a.createElement(H,null))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},90:function(e,t,a){e.exports=a(128)},98:function(e,t,a){}},[[90,1,2]]]);
//# sourceMappingURL=main.020b7e57.chunk.js.map